{% extends 'base.html.twig' %}

{% block title %}Nouvelle Routine — {{ goal.title }}{% endblock %}

{% block stylesheets %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
<style>
    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: #f8f9fb;
    }
    .form-hero {
        background: linear-gradient(135deg, #1e1b4b 0%, #4c1d95 55%, #1e3a5f 100%);
        padding: 5.5rem 0 2.5rem;
        position: relative; overflow: hidden;
    }
    .form-hero::before {
        content: '';
        position: absolute; top: -80px; right: -80px;
        width: 380px; height: 380px;
        background: radial-gradient(circle, rgba(147,51,234,.2) 0%, transparent 70%);
        border-radius: 50%; pointer-events: none;
    }
    .form-hero::after {
        content: '';
        position: absolute; bottom: -60px; left: 5%;
        width: 260px; height: 260px;
        background: radial-gradient(circle, rgba(192,132,252,.14) 0%, transparent 70%);
        border-radius: 50%; pointer-events: none;
    }
    .hero-back { color: rgba(255,255,255,.5); font-size: .85rem; font-weight: 500; text-decoration: none; display: inline-flex; align-items: center; gap: .4rem; margin-bottom: 1.25rem; transition: color .2s; position: relative; z-index: 1; }
    .hero-back:hover { color: white; }
    .hero-eyebrow { font-size: .72rem; font-weight: 700; letter-spacing: .12em; text-transform: uppercase; color: #c084fc; margin-bottom: .5rem; position: relative; z-index: 1; }
    .hero-title { font-size: 2rem; font-weight: 900; color: white; letter-spacing: -.03em; margin-bottom: .4rem; position: relative; z-index: 1; }
    .hero-sub { font-size: .95rem; color: rgba(255,255,255,.55); position: relative; z-index: 1; }
    .hero-sub strong { color: rgba(255,255,255,.85); }
    .form-content { padding: 2.5rem 0 4rem; }
    .form-card {
        background: white;
        border: 2px solid #eef0f4;
        border-radius: 1.5rem;
        overflow: hidden;
        max-width: 700px;
        margin: 0 auto;
        box-shadow: 0 4px 24px rgba(0,0,0,.05);
    }
    .form-card-header {
        background: linear-gradient(135deg, #f5f3ff, #ede9fe);
        padding: 1.25rem 1.75rem;
        border-bottom: 2px solid #e8e0fb;
        display: flex; align-items: center; gap: .75rem;
    }
    .form-card-icon {
        width: 38px; height: 38px;
        background: linear-gradient(135deg, #9333ea, #7c3aed);
        border-radius: 10px;
        display: flex; align-items: center; justify-content: center;
        color: white; font-size: 1rem;
        box-shadow: 0 4px 12px rgba(147,51,234,.3);
    }
    .form-card-header h2 { font-size: 1rem; font-weight: 800; color: #1e293b; margin: 0; }
    .form-card-body { padding: 1.75rem; }
    .form-field { margin-bottom: 1.25rem; }
    .form-field label { display: block; font-size: .82rem; font-weight: 700; color: #374151; margin-bottom: .4rem; }
    .form-field input,
    .form-field textarea,
    .form-field select {
        width: 100%;
        padding: .7rem 1rem;
        border: 2px solid #e5e7eb;
        border-radius: .75rem;
        font-size: .9rem;
        font-family: inherit;
        color: #111827;
        background: white;
        transition: border-color .2s, box-shadow .2s;
        outline: none;
        box-sizing: border-box;
    }
    .form-field input:focus,
    .form-field textarea:focus,
    .form-field select:focus {
        border-color: #a78bfa;
        box-shadow: 0 0 0 3px rgba(167,139,250,.15);
    }
    .form-field textarea { resize: vertical; }
    .form-actions {
        display: flex; gap: .75rem;
        padding-top: 1.25rem;
        border-top: 2px solid #f5f3ff;
        margin-top: 1.75rem;
    }
    .btn-submit {
        flex: 1;
        padding: .8rem;
        background: linear-gradient(135deg, #9333ea, #7c3aed);
        color: white; border: none; border-radius: .875rem;
        font-size: .95rem; font-weight: 700; font-family: inherit;
        cursor: pointer; transition: all .2s;
        box-shadow: 0 4px 14px rgba(147,51,234,.35);
        display: flex; align-items: center; justify-content: center; gap: .4rem;
    }
    .btn-submit:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(147,51,234,.45); }
    .btn-cancel {
        padding: .8rem 1.5rem;
        background: white;
        color: #6b7280; border: 2px solid #e5e7eb; border-radius: .875rem;
        font-size: .9rem; font-weight: 600; font-family: inherit;
        cursor: pointer; text-decoration: none;
        display: flex; align-items: center; justify-content: center; gap: .4rem;
        transition: all .2s;
    }
    .btn-cancel:hover { border-color: #d1d5db; background: #f9fafb; color: #374151; }
</style>
{% endblock %}

{% block body %}
<div class="form-hero">
    <div class="container">
        <a href="{{ path('app_goal_show', {id: goal.id}) }}" class="hero-back">
            <i class="bi bi-arrow-left"></i> {{ goal.title }}
        </a>
        <p class="hero-eyebrow"><i class="bi bi-arrow-repeat me-1"></i>Routines</p>
        <h1 class="hero-title">Nouvelle routine</h1>
        <p class="hero-sub">Objectif : <strong>{{ goal.title }}</strong></p>
    </div>
</div>

<div class="form-content">
    <div class="container">
        <div class="form-card">
            <div class="form-card-header">
                <div class="form-card-icon"><i class="bi bi-plus-circle"></i></div>
                <h2>Informations de la routine</h2>
            </div>
            <div class="form-card-body">
                {{ form_start(form, {
                    'action': path('app_routine_new', {goalId: goal.id}),
                    'method': 'POST',
                    'attr': {'novalidate': ''}
                }) }}
                    <div class="form-field">
                        {{ form_label(form.title, null, {'label_attr': {'class': ''}}) }}
                        {{ form_widget(form.title, {'attr': {'placeholder': 'Ex : Entraînement matinal', 'class': ''}}) }}
                        {{ form_errors(form.title) }}
                    </div>
                    <div class="form-field">
                        {{ form_label(form.description, null, {'label_attr': {'class': ''}}) }}
                        {{ form_widget(form.description, {'attr': {'placeholder': 'Décrivez votre routine…', 'rows': 4, 'class': ''}}) }}
                        {{ form_errors(form.description) }}
                    </div>
                    <div class="form-field">
                        {{ form_label(form.visibility, null, {'label_attr': {'class': ''}}) }}
                        {{ form_widget(form.visibility, {'attr': {'class': ''}}) }}
                        {{ form_errors(form.visibility) }}
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-submit">
                            <i class="bi bi-check-circle"></i> Enregistrer la routine
                        </button>
                        <a href="{{ path('app_goal_show', {id: goal.id}) }}" class="btn-cancel">
                            Annuler
                        </a>
                    </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
