<!-- User Growth Forecast Card (AI Prediction) -->
<div class="card bg-transparent border">
    <div class="card-header bg-transparent border-bottom">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h5 class="card-header-title mb-0">User Growth Forecast</h5>
                <p class="mb-0 small text-muted">AI-Powered Prediction</p>
            </div>
            <span class="badge bg-primary bg-opacity-10 text-primary">
                <i class="fas fa-robot me-1"></i> AI Prediction
            </span>
        </div>
    </div>
    <div class="card-body">
        <div id="userForecastChart"></div>
        <div class="mt-3 p-3 bg-light rounded">
            <div class="row text-center">
                <div class="col-4">
                    <small class="text-muted d-block">Predicted Growth</small>
                    <strong class="text-success">+{{ forecastData.predictedGrowth }}%</strong>
                </div>
                <div class="col-4">
                    <small class="text-muted d-block">Confidence</small>
                    <strong>{{ forecastData.confidence }}%</strong>
                </div>
                <div class="col-4">
                    <small class="text-muted d-block">Expected Users</small>
                    <strong>{{ forecastData.expectedUsers }}</strong>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var options = {
        series: [{
            name: 'Historical Data',
            data: {{ forecastData.historical|json_encode|raw }}
        }, {
            name: 'Predicted',
            data: {{ forecastData.predicted|json_encode|raw }}
        }],
        chart: {
            height: 350,
            type: 'line',
            toolbar: {
                show: false
            }
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            curve: 'smooth',
            width: [3, 3],
            dashArray: [0, 5]
        },
        xaxis: {
            categories: {{ forecastData.labels|json_encode|raw }}
        },
        colors: ['#066ac9', '#0cbc87'],
        fill: {
            type: ['solid', 'gradient'],
            gradient: {
                shade: 'light',
                type: 'vertical',
                shadeIntensity: 0.5,
                opacityFrom: 0.7,
                opacityTo: 0.3,
            }
        },
        legend: {
            position: 'top'
        },
        annotations: {
            xaxis: [{
                x: {{ forecastData.currentMonthIndex }},
                borderColor: '#999',
                label: {
                    style: {
                        color: '#fff',
                        background: '#775DD0'
                    },
                    text: 'Current'
                }
            }]
        }
    };

    var chart = new ApexCharts(document.querySelector("#userForecastChart"), options);
    chart.render();
});
</script>
